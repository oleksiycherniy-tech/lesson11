#include <iostream>
#include <string>
#include <cstdlib>
#include <ctime>

using namespace std;


class Shop {
public:
    int buyerBalance;
    int prices[3];
    int stock[3];
    bool bought[3];

    Shop() {
        buyerBalance = 1000;

        prices[0] = 300;
        prices[1] = 700;
        prices[2] = 150;

        for (int i = 0; i < 3; i++) {
            stock[i] = 5;
            bought[i] = false;
        }
    }

    void showProducts() {
        cout << "\n–¢–æ–≤–∞—Ä–∏:\n";
        cout << "1 - –ú–∏—à–∫–∞ (" << prices[0] << " –≥—Ä–Ω | " << stock[0] << ")\n";
        cout << "2 - –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ (" << prices[1] << " –≥—Ä–Ω | " << stock[1] << ")\n";
        cout << "3 - –ö–æ–≤—Ä–∏–∫ (" << prices[2] << " –≥—Ä–Ω | " << stock[2] << ")\n";
        cout << "0 - –í–∏–π—Ç–∏\n";
    }


    void buy(int c) {
        int i = c - 1;
        if (c < 1 || c > 3) return;

        if (buyerBalance >= prices[i] && stock[i] > 0) {
            buyerBalance -= prices[i];
            stock[i]--;
            bought[i] = true;
            cout << "–ö—É–ø–ª–µ–Ω–æ\n";
        } else {
            cout << "–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤ –∞–±–æ —Ç–æ–≤–∞—Ä—É –Ω–µ–º–∞—î\n";
        }
    }

    void returnProduct(int c) {
        int i = c - 1;
        if (c < 1 || c > 3) return;

        if (bought[i]) {
            buyerBalance += prices[i];
            stock[i]++;
            bought[i] = false;
            cout << "–ü–æ–≤–µ—Ä–Ω–µ–Ω–æ\n";
        } else {
            cout << "–í–∏ –Ω–µ –∫—É–ø—É–≤–∞–ª–∏ —Ü–µ–π —Ç–æ–≤–∞—Ä\n";
        }
    }


    void sell(int c, int &sellerBalance) {
        int i = c - 1;
        if (c < 1 || c > 3) return;

        if (stock[i] > 0) {
            stock[i]--;
            sellerBalance += prices[i];
            cout << "–ü—Ä–æ–¥–∞–Ω–æ\n";
        } else {
            cout << "–¢–æ–≤–∞—Ä—É –Ω–µ–º–∞—î\n";
        }
    }

    void sellerReturn(int c, int &sellerBalance) {
        int i = c - 1;
        if (c < 1 || c > 3) return;

        stock[i]++;
        sellerBalance -= prices[i];
        cout << "–¢–æ–≤–∞—Ä –ø–æ–≤–µ—Ä–Ω—É–ª–∏\n";
    }


    void watchCameras() {
        int r = rand() % 3;

        cout << "\nüìπ –ö–∞–º–µ—Ä–∏:\n";
        if (r == 0) cout << "–í—Å–µ —Å–ø–æ–∫—ñ–π–Ω–æ\n";
        if (r == 1) cout << "–ü–æ—Ç—Ä—ñ–±–Ω–æ –ø—ñ–¥—ñ–π—Ç–∏ –¥–æ –∫–ª—ñ—î–Ω—Ç–∞\n";
        if (r == 2) cout << "–ö—Ä–∞–¥—ñ–∂–∫–∞!\n";
    }
};

int main() {
    srand(time(0));
    Shop shop;

    string password;
    cout << "–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å (Enter = –ø–æ–∫—É–ø–µ—Ü—å): ";
    getline(cin, password);

    string role = "–ü–æ–∫—É–ø–µ—Ü—å";

    if (password == "admin123") role = "–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä";
    else if (password == "seller123") role = "–ü—Ä–æ–¥–∞–≤–µ—Ü—å";
    else if (password == "guard123") role = "–û—Ö–æ—Ä–æ–Ω–µ—Ü—å";

    cout << "\n–í–∞—à–∞ —Ä–æ–ª—å: " << role << "\n";

    int choice;


    if (role == "–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä") {
        string events[10];
        int count = 0;

        while (true) {
            cout << "\n1 - –î–æ–¥–∞—Ç–∏ –ø–æ–¥—ñ—é\n2 - –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ–¥—ñ—ó\n0 - –í–∏–π—Ç–∏\n";
            cin >> choice;

            if (choice == 0) break;

            if (choice == 1) {
                cin.ignore();
                cout << "–ù–∞–∑–≤–∞ –ø–æ–¥—ñ—ó: ";
                getline(cin, events[count++]);
                cout << "–ü–æ–¥—ñ—é –¥–æ–¥–∞–Ω–æ\n";
            }

            if (choice == 2) {
                cout << "\n–ü–æ–¥—ñ—ó:\n";
                for (int i = 0; i < count; i++)
                    cout << i + 1 << " - " << events[i] << "\n";
            }
        }
    }


    else if (role == "–ü—Ä–æ–¥–∞–≤–µ—Ü—å") {
        int sellerBalance = 0;

        while (true) {
            shop.showProducts();
            cout << "–ë–∞–ª–∞–Ω—Å –ø—Ä–æ–¥–∞–≤—Ü—è: " << sellerBalance << " –≥—Ä–Ω\n";
            cout << "1 - –ü—Ä–æ–¥–∞—Ç–∏\n2 - –ü—Ä–∏–π–Ω—è—Ç–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è\n0 - –í–∏–π—Ç–∏\n";
            cin >> choice;

            if (choice == 0) break;

            int p;
            cout << "–û–±–µ—Ä—ñ—Ç—å —Ç–æ–≤–∞—Ä: ";
            cin >> p;

            if (choice == 1) shop.sell(p, sellerBalance);
            if (choice == 2) shop.sellerReturn(p, sellerBalance);
        }
    }


    else if (role == "–û—Ö–æ—Ä–æ–Ω–µ—Ü—å") {
        while (true) {
            cout << "\n1 - –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –∫–∞–º–µ—Ä–∏\n0 - –í–∏–π—Ç–∏\n";
            cin >> choice;
            if (choice == 0) break;
            shop.watchCameras();
        }
    }


    else {
        while (true) {
            shop.showProducts();
            cout << "–ë–∞–ª–∞–Ω—Å: " << shop.buyerBalance << " –≥—Ä–Ω\n";
            cout << "–û–±–µ—Ä—ñ—Ç—å —Ç–æ–≤–∞—Ä: ";
            cin >> choice;
            if (choice == 0) break;
            shop.buy(choice);
        }

        cout << "–ü–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ç–æ–≤–∞—Ä? (1 - —Ç–∞–∫): ";
        cin >> choice;
        if (choice == 1) {
            shop.showProducts();
            cin >> choice;
            shop.returnProduct(choice);
        }
    }

    return 0;
}

